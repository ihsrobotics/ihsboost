<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ihs_boost: IHS Boost</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ihs_boost
   &#160;<span id="projectnumber">1.8.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">IHS Boost </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a><img src="https://github.com/ihsrobotics/ihsboost/actions/workflows/cmake.yml/badge.svg" alt="CMake Build" style="pointer-events: none;" class="inline"/></p>
<p>The ihs library of robot functions, from steady acceleration to servo movement </p>
<h1><a class="anchor" id="autotoc_md1"></a>
Installing</h1>
<h2><a class="anchor" id="autotoc_md2"></a>
Dependencies</h2>
<p>Some ihsboost modules have dependencies. The format below is dependency - modules - installation instructions</p><ul>
<li>libwallaby - servos, movement, create_extra - please use <a href="https://github.com/chrehall68/libwallaby/tree/refactor">this branch</a> to install libwallaby</li>
<li>libjsoncpp - util - on linux, run <code>sudo apt-get install libjsoncpp-dev</code> to install</li>
<li>libbluetooth - communicate - on linux, run <code>sudo apt-get install libbluetooth-dev</code> to install</li>
<li>libboost_python - bindings - on linux, run <code>sudo apt-get install libboost-python-dev</code> to install </li>
</ul>
<h2><a class="anchor" id="autotoc_md3"></a>
Getting the Source files</h2>
<p>To get the source files on a wombat, the best way to do that is to start on your local computer. Run <code>git clone <a href="https://github.com/ihsrobotics/ihsboost.git">https://github.com/ihsrobotics/ihsboost.git</a></code> to get the github repository locally.</p>
<p>If you are going to install on an older wombat, make sure to run the following in the same directory on your local machine:</p>
<div class="fragment"><div class="line">cd ./ihsboost</div>
<div class="line">git switch older-wombat</div>
<div class="line">cd ..</div>
</div><!-- fragment --><p>Finally, copy the directory over with the following command: <code>scp -r ./ihsboost pi@(ipaddress):~/</code> where <code>(ipaddress)</code> should be the ip addresss (ie 192.168.125.1). This will copy ihsboost into the home directory of the wombat. </p>
<h2><a class="anchor" id="autotoc_md4"></a>
Wombat Build</h2>
<p>To build on the wombat, run the following commands from terminal inside the ihsboost directory on the wombat</p>
<div class="fragment"><div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=Release</div>
<div class="line">make -j4</div>
<div class="line">sudo make install</div>
</div><!-- fragment --><p>Note: you will need to use either the <code>main</code> branch or the <code>older-wombat</code> branch depending on whether you are using a new wombat or an old (original OS) wombat (see <code>Getting the Source files</code>) </p>
<h2><a class="anchor" id="autotoc_md5"></a>
Cross Compile</h2>
<p>In order to cross-compile ihsboost, make sure to create a toolchain file. It should look something like this </p><div class="fragment"><div class="line"># set the target architecture and system name (for raspberry pi, is aarch64)</div>
<div class="line">set(CMAKE_SYSTEM_NAME Linux)</div>
<div class="line">set(CMAKE_SYSTEM_PROCESSOR aarch64)</div>
<div class="line"> </div>
<div class="line"># set the compiler you want to use</div>
<div class="line">set(CMAKE_C_COMPILER clang)</div>
<div class="line">set(CMAKE_CXX_COMPILER clang++)</div>
<div class="line"> </div>
<div class="line"># location of libs and includes to link/compile against</div>
<div class="line">set(CMAKE_SYSROOT /path/to/your/sysroot)</div>
<div class="line"> </div>
<div class="line"># when using clang, make sure to set the c and cxx flags (cpu is optional)</div>
<div class="line">set(CMAKE_C_FLAGS &quot;${CMAKE_C_FLAGS} -O3 --target=${CMAKE_SYSTEM_PROCESSOR}-linux-gnu --sysroot=${CMAKE_SYSROOT} -mcpu=cortex-a53&quot;)</div>
<div class="line">set(CMAKE_CXX_FLAGS &quot;${CMAKE_C_FLAGS}&quot;)</div>
<div class="line"> </div>
<div class="line"># where you want to install the files locally before copying</div>
<div class="line"># them to their final destination</div>
<div class="line">set(CMAKE_STAGING_PREFIX /path/to/temporary/out)</div>
</div><!-- fragment --><p> Then, just specify the toolchain file when configuring with the option <code>-DCMAKE_TOOLCHAIN_FILE=/path/to/your/toolchain/file</code>. For example, to cross compile the full library, you could run </p><div class="fragment"><div class="line">cmake .. -DCMAKE_BUILD_TYPE=Release -DCMAKE_TOOLCHAIN_FILE=/path/to/your/toolchain/file`</div>
</div><!-- fragment --><p> After configuring with cmake, building can proceed normally </p>
<h2><a class="anchor" id="autotoc_md6"></a>
Other Build Options</h2>
<p>The following are options that can be appended to the <code>cmake</code> command when configuring the project.</p>
<ul>
<li><code>-Dbuild_library=ON/OFF</code> - build ihsboost, defaults to <code>ON</code></li>
<li><code>-Dbuild_tests=OFF/ON</code> - build tests to assure that ihsboost built successfully, defaults to <code>OFF</code></li>
<li><code>-Dwith_documentation=OFF/ON</code> - build documentation files for the project, defaults to <code>OFF</code></li>
<li><code>-Droomba=ON/OFF</code> - use roomba configs or not, defaults to <code>ON</code></li>
<li><code>-Dpython_version=XXX</code> - use a specific version of python (for example, 3.9 or 3.10), defaults to 3.9, only relevant if building python bindings</li>
</ul>
<p>The following are options to configure which ihsboost modules to build</p><ul>
<li><code>-Dbuild_bindings=ON/OFF</code>- build python bindings, defaults to <code>ON</code></li>
<li><code>-Dbuild_communicate=ON/OFF</code> - build communicate, defaults to <code>ON</code></li>
<li><code>-Dbuild_controllers=ON/OFF</code> - build controllers, defaults to <code>ON</code></li>
<li><code>-Dbuild_create_extra=ON/OFF</code> - build extra create functionality (vacuum and brushes), defaults to <code>ON</code></li>
<li><code>-Dbuild_movement=ON/OFF</code> - build movement functions, defaults to <code>ON</code></li>
<li><code>-Dbuild_servos=ON/OFF</code> - build servo movement functions, defaults to <code>ON</code></li>
<li><code>-Dbuild_thread=ON/OFF</code> - build threading classes, defaults to <code>ON</code></li>
<li><code>-Dbuild_util=ON/OFF</code> - build util, defaults to <code>ON</code></li>
</ul>
<p>For example, <code>cmake .. -DCMAKE_BUILD_TYPE=Release -Dwith_documentation=ON -Dpython_version=3.10</code> will configure cmake to build the library and python bindings (since <code>build_library</code> and <code>build_bindings</code> default to <code>ON</code>) but will also make the documentation (since <code>with_documentation</code> was specified to <code>ON</code>) and use python 3.10 instean of python 3.9 </p>
<h1><a class="anchor" id="autotoc_md7"></a>
Compiling programs with it</h1>
<p>To compile a program with the ihsboost library, then assuming that you have already installed ihsboost, all you have to do is the following command to compile to form the executable <code>./a.out</code>:</p>
<div class="fragment"><div class="line">g++ (file) -lihsboost -lkipr -pthread -lrt -std=c++11</div>
</div><!-- fragment --><p>Note: <code>(file)</code> should be replaced by the name of the file that should be compiled.</p>
<p>Note: <code>-lrt</code> is only necessary on older wombats </p>
<h1><a class="anchor" id="autotoc_md8"></a>
Running python programs with it</h1>
<p>To run a python program using ihsboost, import the python module <code>ihs_bindings</code> in your program. An example program might look like this:</p>
<div class="fragment"><div class="line">import ihs_bindings</div>
<div class="line">print(dir(ihs_bindings))</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md9"></a>
Network Config</h1>
<h2><a class="anchor" id="autotoc_md10"></a>
Steps</h2>
<p>If you are trying to connect from older wombat to older wombat, then the following extra steps are required from one of them in order to connect to the wifi of another wombat:</p>
<div class="fragment"><div class="line">sudo systemctl stop hostapd</div>
<div class="line">sudo systemctl start wpa_supplicant</div>
<div class="line"> </div>
<div class="line">wpa_passphrase (wifi_name) (wifi_password) | sudo tee /etc/wpa_supplicant.conf</div>
</div><!-- fragment --><p>Where <code>(wifi_name)</code> is the name of the wifi that you want to connect to and <code>(wifi_password)</code> is the password for that wifi network.</p>
<p>Then, in a terminal that you will keep open, run</p>
<div class="fragment"><div class="line">sudo wpa_supplicant -i wlan0 -c /etc/wpa_supplicant.conf &amp;</div>
<div class="line">sudo ifconfig wlan0 (new_ip_address)</div>
</div><!-- fragment --><p>Where <code>(new_ip_address)</code> is the ip address that you want this wombat to have now. </p>
<h2><a class="anchor" id="autotoc_md11"></a>
Example</h2>
<div class="fragment"><div class="line">sudo systemctl stop hostapd</div>
<div class="line">sudo systemctl start wpa_supplicant</div>
<div class="line"> </div>
<div class="line">wpa_passphrase 5555-wombat d0a0b500 | sudo tee /etc/wpa_supplicant.conf</div>
<div class="line">sudo wpa_supplicant -i wlan0 -c /etc/wpa_supplicant.conf &amp;</div>
<div class="line">sudo ifconfig wlan0 192.168.125.2</div>
</div><!-- fragment --><p>This connects to the network <code>5555-wombat</code> that has password <code>d0a0b500</code>. Then, it sets the current wombat's ip address to <code>192.168.125.2</code>. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
